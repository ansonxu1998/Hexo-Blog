{"title":"STM32 中断和事件","uid":"123422951594fa2cdc8f869cafbfa775","slug":"MCU/STM32-IAE","date":"2022-10-12T09:36:00.000Z","updated":"2023-05-06T11:34:51.397Z","comments":true,"path":"api/articles/MCU/STM32-IAE.json","keywords":null,"cover":"/img/STM32-GPIO/STM32-logo.jpg","content":"<h2 id=\"嵌套向量中断控制器-nvic\">嵌套向量中断控制器 (NVIC)</h2>\n<p><strong>特点</strong></p>\n<ul>\n<li>68条 (不包括 16 条 Cortex®-M3 中断线)</li>\n<li>16 个可编程优先级 (使用 4 位中断优先级)</li>\n<li>低延迟异常和中断处理</li>\n<li>系统控制寄存器的实现</li>\n</ul>\n<p>NVIC\n和处理器核心接口紧密耦合，使得低延迟中断处理和高效处理延迟到达的中断成为可能。</p>\n<p>包括核心异常在内的所有中断都由 NVIC 管理。</p>\n<h3 id=\"systick-校准值寄存器\">SysTick 校准值寄存器</h3>\n<p>SysTick 校准值设置为 9000，其中 SysTick 时钟设置为 9 MHz\n(最大HCLK/8)，参考时间基数为 1 ms。</p>\n<h2 id=\"外部中断事件控制器-exti\">外部中断/事件控制器 (EXTI)</h2>\n<p>外部中断/事件控制器由多达 20\n个连接线设备中的边缘检测器组成，或其他设备中的 19\n个边缘检测器，用于产生事件/中断请求。每个输入线都可以独立配置类型（事件或中断）和相应的触发事（上升或下降或二者都有）。每条线也可以独立屏蔽。挂起寄存器维护中断请求的状态线。</p>\n<h3 id=\"主要特点\">主要特点</h3>\n<ul>\n<li>每个中断/事件线可以独立的触发和屏蔽</li>\n<li>每个中断线有专有的状态位</li>\n<li>产生多达 20 个软件事件/中断请求</li>\n<li>检测脉冲宽度低于 APB2 时钟周期的外部信号。</li>\n</ul>\n<h3 id=\"框图\">框图</h3>\n<p><img src=\"/img/STM32-IAE/block%20diagram.png\"></p>\n<h3 id=\"唤醒事件管理\">唤醒事件管理</h3>\n<p>STM32F10xxx 能够处理外部或内部事件，以唤醒核心\n(WFE)。唤醒事件可以通过以下方式产生:</p>\n<ul>\n<li>在外设控制寄存器中启用中断，但在 NVIC 中不启用中断，并在 Cortex®-M3\n系统控制寄存器中启用 SEVONPEND 位。当 MCU 从 WFE\n恢复时，外设中断挂起位和外设 NVIC IRQ 通道挂起位(在 NVIC\n中断清除挂起寄存器中)必须被清除。</li>\n<li>或者在事件模式下配置外部或内部 EXTI 线路。当 CPU 从 WFE\n恢复时，无需清除外设中断挂起位或 NVIC IRQ\n通道暂挂位作为事件行对应的暂挂位未设置。</li>\n</ul>\n<p>在连线设备中，以太网唤醒事件也具有 WFE 唤醒能力。</p>\n<h3 id=\"功能描述\">功能描述</h3>\n<p>若要产生中断，必须配置并使能中断线：</p>\n<ul>\n<li>Falling trigger 和 Rising trigger 两个触发寄存器</li>\n<li>置位中断屏蔽寄存器(Interrupt mask register)的相关位，使能中断</li>\n<li>置位中断线对应的挂起位(Pending request register)</li>\n</ul>\n<p>若要产生事件，必须配置并使能事件线：</p>\n<ul>\n<li>Falling trigger 和 Rising trigger 两个触发寄存器</li>\n<li>置位事件屏蔽寄存器(Event mask register)的相关位，使能事件</li>\n</ul>\n<p>中断/事件请求也可以由软件向中断/事件寄存器中写入 <code>1</code>\n来产生。</p>\n<h4 id=\"硬件中断选择\">硬件中断选择</h4>\n<p>配置 20 条线路作为中断源：</p>\n<ul>\n<li>配置 20 条中断线的屏蔽位 (EXTI_IMR)</li>\n<li>配置中断线的触发选择位 (EXTI_RTSR, EXTI_FTSR)</li>\n<li>配置控制 NVIC IRQ\n通道映射到外部中断控制器(EXTI)的使能和屏蔽位，以便能够正确识别来自20\n条中断线的中断。</li>\n</ul>\n<h4 id=\"硬件事件选择\">硬件事件选择</h4>\n<p>配置 20 条线路作为事件源：</p>\n<ul>\n<li>配置 20 条事件线的屏蔽位 (EXTI_EMR)</li>\n<li>配置事件线的触发选择位 (EXTI_RTSR, EXTI_FTSR)</li>\n</ul>\n<h4 id=\"软件中断事件选择\">软件中断/事件选择</h4>\n<p>这 20 条线路可以配置为软件中断/事件线：</p>\n<ul>\n<li>配置 20 条中断/事件线的屏蔽位 (EXTI_IMR, EXTI_EMR)</li>\n<li>设置软件中断寄存器的需求位 (EXTI_SWIER)</li>\n</ul>\n<h3 id=\"外部中断事件线映射\">外部中断/事件线映射</h3>\n<p><img src=\"/img/STM32-IAE/External%20interrupt%20event%20GPIO%20mapping.png\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>要配置 AFIO_EXTICRx 来将外部中断/事件线映射到 GPIO 上，首先应该启用\nAFIO 时钟。</p></blockquote>\n<p>其他四条 EXTI 线路连接如下:</p>\n<ul>\n<li>EXTI 16 连接到 PVD 输出</li>\n<li>EXTI 17 连接到 RTC Alarm 事件</li>\n<li>EXTI 18 连接到 USB 唤醒事件</li>\n<li>EXTI 19 连接到以太网唤醒事件(仅在连接线设备中可用)</li>\n</ul>\n<h2 id=\"exti-寄存器\">EXTI 寄存器</h2>\n<h3 id=\"中断屏蔽寄存器-exti_imr\">中断屏蔽寄存器 (EXTI_IMR)</h3>\n<p>Address offset: 0x00</p>\n<p>Reset value: 0x0000 0000</p>\n<p><img src=\"/img/STM32-IAE/IMR.png\"></p>\n<p><code>MRx</code>: Line x 的中断屏蔽</p>\n<ul>\n<li><code>0</code> - 屏蔽中断</li>\n<li><code>1</code> - 使能中断</li>\n</ul>\n<h3 id=\"事件屏蔽寄存器-exti_emr\">事件屏蔽寄存器 (EXTI_EMR)</h3>\n<p>Address offset: 0x04</p>\n<p>Reset value: 0x0000 0000</p>\n<p><img src=\"/img/STM32-IAE/EMR.png\"></p>\n<p><code>MRx</code>: Line x 的事件屏蔽</p>\n<ul>\n<li><code>0</code> - 屏蔽事件</li>\n<li><code>1</code> - 使能事件</li>\n</ul>\n<h3 id=\"上升沿触发选择寄存器-exti_rtsr\">上升沿触发选择寄存器\n(EXTI_RTSR)</h3>\n<p>Address offset: 0x08</p>\n<p>Reset value: 0x0000 0000</p>\n<p><img src=\"/img/STM32-IAE/RTSR.png\"></p>\n<p><code>TRx</code>: Line x 的上升沿触发事件配置位</p>\n<ul>\n<li><code>0</code> - 禁止上升沿触发</li>\n<li><code>1</code> - 使能上升沿触发</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>外部唤醒线路由边沿触发，这些线路上不得产生干扰。如果在写入 EXTI_RTSR\n寄存器期间外部中断线上出现上升沿，不设置挂起位。</p>\n<p>可以为同一中断线设置上升沿和下降沿触发器。这样两者都生成一个触发条件。</p></blockquote>\n<h3 id=\"下降沿触发选择寄存器-exti_ftsr\">下降沿触发选择寄存器\n(EXTI_FTSR)</h3>\n<p>Address offset: 0x0C</p>\n<p>Reset value: 0x0000 0000</p>\n<p><img src=\"/img/STM32-IAE/FTSR.png\"></p>\n<p><code>TRx</code>: Line x 的下降沿触发事件配置位</p>\n<ul>\n<li><code>0</code> - 禁止下降沿触发</li>\n<li><code>1</code> - 使能下降沿触发</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>如果在写入 EXTI_FTSR\n寄存器期间外部中断线上出现下降沿，不设置挂起位。</p></blockquote>\n<h3 id=\"软件中断事件寄存器-exti_swier\">软件中断事件寄存器\n(EXTI_SWIER)</h3>\n<p>Address offset: 0x10 Reset value: 0x0000 0000</p>\n<p><img src=\"/img/STM32-IAE/SWIER.png\"></p>\n<p><code>SWIERx</code>: Line x 的软件中断</p>\n<p>如果 Line x 在 EXTI_IMR 中被使能，则当 SWIERx 为 <code>0</code>\n时向它写入 <code>1</code>，<code>EXTI_PR</code>\n寄存器中的相应的挂起位将被设置，从产生一个中断请求。</p>\n<p>通过清除 EXTI_PR 的相应位来清除该位。</p>\n<h3 id=\"挂起寄存器-exti_pr\">挂起寄存器 (EXTI_PR)</h3>\n<p>Address offset: 0x14 Reset value: undefined</p>\n<p><img src=\"/img/STM32-IAE/PR.png\"></p>\n<p><code>PRx</code>: 挂起位</p>\n<ul>\n<li><code>0</code> - 没触发器产生请求</li>\n<li><code>1</code> - 被选择的触发器产生请求</li>\n</ul>\n<h3 id=\"exti-寄存器映射\">EXTI 寄存器映射</h3>\n<p><img src=\"/img/STM32-IAE/register%20map.png\"></p>\n<h2 id=\"cubemx-配置\">CubeMX 配置</h2>\n<h3 id=\"配置-gpio-模式\">配置 GPIO 模式：</h3>\n<p><img src=\"/img/STM32-IAE/GPIO%20Mode.png\"></p>\n<p><img src=\"/img/STM32-IAE/GPIO%20Mode%20NVIC.png\"></p>\n<h3 id=\"nvic-配置\">NVIC 配置：</h3>\n<p><img src=\"/img/STM32-IAE/NVIC%20Mode.png\"></p>\n<h3 id=\"配置代码\">配置代码</h3>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">void MX_GPIO_Init(void)\n{\n  GPIO_InitTypeDef GPIO_InitStruct = {0};\n\n  /* GPIO Ports Clock Enable */\n  __HAL_RCC_GPIOA_CLK_ENABLE();\n\n  /*Configure GPIO pin : PA0 */\n  GPIO_InitStruct.Pin = GPIO_PIN_0;\n  GPIO_InitStruct.Mode = GPIO_MODE_IT_RISING;\n  GPIO_InitStruct.Pull = GPIO_NOPULL;\n  HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStruct);\n\n  /* EXTI interrupt init*/\n  HAL_NVIC_SetPriority(EXTI0_IRQn, 1, 0);\n  HAL_NVIC_EnableIRQ(EXTI0_IRQn);\n}</code></pre>\n<p><code>HAL_GPIO_Init</code> 中的外部中断配置代码：</p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">/*--------------------- EXTI Mode Configuration ------------------------*/\n/* Configure the External Interrupt or event for the current IO */\nif ((GPIO_Init-&gt;Mode &amp; EXTI_MODE) == EXTI_MODE)\n{\n    /* Enable AFIO Clock */\n    __HAL_RCC_AFIO_CLK_ENABLE();\n    temp = AFIO-&gt;EXTICR[position &gt;&gt; 2u];\n    CLEAR_BIT(temp, (0x0Fu) &lt;&lt; (4u * (position &amp; 0x03u)));\n    SET_BIT(temp, (GPIO_GET_INDEX(GPIOx)) &lt;&lt; (4u * (position &amp; 0x03u)));\n    AFIO-&gt;EXTICR[position &gt;&gt; 2u] = temp;\n    /* Configure the interrupt mask */\n    if ((GPIO_Init-&gt;Mode &amp; GPIO_MODE_IT) == GPIO_MODE_IT)\n    {\n        SET_BIT(EXTI-&gt;IMR, iocurrent);\n    }\n    else\n    {\n        CLEAR_BIT(EXTI-&gt;IMR, iocurrent);\n    }\n    /* Configure the event mask */\n    if ((GPIO_Init-&gt;Mode &amp; GPIO_MODE_EVT) == GPIO_MODE_EVT)\n    {\n        SET_BIT(EXTI-&gt;EMR, iocurrent);\n    }\n    else\n    {\n        CLEAR_BIT(EXTI-&gt;EMR, iocurrent);\n    }\n    /* Enable or disable the rising trigger */\n    if ((GPIO_Init-&gt;Mode &amp; RISING_EDGE) == RISING_EDGE)\n    {\n        SET_BIT(EXTI-&gt;RTSR, iocurrent);\n    }\n    else\n    {\n        CLEAR_BIT(EXTI-&gt;RTSR, iocurrent);\n    }\n    /* Enable or disable the falling trigger */\n    if ((GPIO_Init-&gt;Mode &amp; FALLING_EDGE) == FALLING_EDGE)\n    {\n        SET_BIT(EXTI-&gt;FTSR, iocurrent);\n    }\n    else\n    {\n        CLEAR_BIT(EXTI-&gt;FTSR, iocurrent);\n    }\n}</code></pre>\n","text":"嵌套向量中断控制器 (NVIC) 特点 68条 (不包括 16 条 Cortex®-M3 中断线) 16 个可编程优先级 (使用 4 位中断优先级) 低延迟异常和中断处理 系统控制寄存器的实现 NVIC 和处理器核心接口紧密耦合，使得低延迟中断处理和高效处理延迟到达的中断成为可能...","link":"","photos":[],"count_time":{"symbolsCount":"4.5k","symbolsTime":"4 mins."},"categories":[{"name":"单片机","slug":"单片机","count":4,"path":"api/categories/单片机.json"}],"tags":[{"name":"STM32","slug":"STM32","count":4,"path":"api/tags/STM32.json"},{"name":"中断和事件","slug":"中断和事件","count":1,"path":"api/tags/中断和事件.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B5%8C%E5%A5%97%E5%90%91%E9%87%8F%E4%B8%AD%E6%96%AD%E6%8E%A7%E5%88%B6%E5%99%A8-nvic\"><span class=\"toc-text\">嵌套向量中断控制器 (NVIC)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#systick-%E6%A0%A1%E5%87%86%E5%80%BC%E5%AF%84%E5%AD%98%E5%99%A8\"><span class=\"toc-text\">SysTick 校准值寄存器</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD%E4%BA%8B%E4%BB%B6%E6%8E%A7%E5%88%B6%E5%99%A8-exti\"><span class=\"toc-text\">外部中断&#x2F;事件控制器 (EXTI)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">主要特点</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A1%86%E5%9B%BE\"><span class=\"toc-text\">框图</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%94%A4%E9%86%92%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">唤醒事件管理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0\"><span class=\"toc-text\">功能描述</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%A1%AC%E4%BB%B6%E4%B8%AD%E6%96%AD%E9%80%89%E6%8B%A9\"><span class=\"toc-text\">硬件中断选择</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%E9%80%89%E6%8B%A9\"><span class=\"toc-text\">硬件事件选择</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%BD%AF%E4%BB%B6%E4%B8%AD%E6%96%AD%E4%BA%8B%E4%BB%B6%E9%80%89%E6%8B%A9\"><span class=\"toc-text\">软件中断&#x2F;事件选择</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD%E4%BA%8B%E4%BB%B6%E7%BA%BF%E6%98%A0%E5%B0%84\"><span class=\"toc-text\">外部中断&#x2F;事件线映射</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#exti-%E5%AF%84%E5%AD%98%E5%99%A8\"><span class=\"toc-text\">EXTI 寄存器</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%AD%E6%96%AD%E5%B1%8F%E8%94%BD%E5%AF%84%E5%AD%98%E5%99%A8-exti_imr\"><span class=\"toc-text\">中断屏蔽寄存器 (EXTI_IMR)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E4%BB%B6%E5%B1%8F%E8%94%BD%E5%AF%84%E5%AD%98%E5%99%A8-exti_emr\"><span class=\"toc-text\">事件屏蔽寄存器 (EXTI_EMR)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8A%E5%8D%87%E6%B2%BF%E8%A7%A6%E5%8F%91%E9%80%89%E6%8B%A9%E5%AF%84%E5%AD%98%E5%99%A8-exti_rtsr\"><span class=\"toc-text\">上升沿触发选择寄存器\n(EXTI_RTSR)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E9%99%8D%E6%B2%BF%E8%A7%A6%E5%8F%91%E9%80%89%E6%8B%A9%E5%AF%84%E5%AD%98%E5%99%A8-exti_ftsr\"><span class=\"toc-text\">下降沿触发选择寄存器\n(EXTI_FTSR)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BD%AF%E4%BB%B6%E4%B8%AD%E6%96%AD%E4%BA%8B%E4%BB%B6%E5%AF%84%E5%AD%98%E5%99%A8-exti_swier\"><span class=\"toc-text\">软件中断事件寄存器\n(EXTI_SWIER)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8C%82%E8%B5%B7%E5%AF%84%E5%AD%98%E5%99%A8-exti_pr\"><span class=\"toc-text\">挂起寄存器 (EXTI_PR)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#exti-%E5%AF%84%E5%AD%98%E5%99%A8%E6%98%A0%E5%B0%84\"><span class=\"toc-text\">EXTI 寄存器映射</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#cubemx-%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">CubeMX 配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-gpio-%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">配置 GPIO 模式：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#nvic-%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">NVIC 配置：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">配置代码</span></a></li></ol></li></ol>","author":{"name":"爱慢跑的乌龟","slug":"blog-author","avatar":"/img/avatar1.jpg","link":"/","description":"求知若饥，虚心若愚！","socials":{"github":"https://github.com/ansonxu1998","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"STM32 DMA","uid":"da1a2b22445c6e9d06b74da423642c5e","slug":"MCU/STM32-DMA","date":"2022-10-14T16:00:00.000Z","updated":"2023-05-11T12:11:10.447Z","comments":true,"path":"api/articles/MCU/STM32-DMA.json","keywords":null,"cover":"/img/STM32-GPIO/STM32-logo.jpg","text":"DMA 的介绍 直接内存访问(Direct memory accesss，DMA) 用于在外设和内存之间以及内存到内存之间提供高速的数据传输。数据可以通过 DMA 快速传输，不需要任何 CPU 操作。这样可以节约 CPU 资源。 两个 DMA 控制器总共有 12 个通道（7 个用...","link":"","photos":[],"count_time":{"symbolsCount":"6.7k","symbolsTime":"6 mins."},"categories":[{"name":"单片机","slug":"单片机","count":4,"path":"api/categories/单片机.json"}],"tags":[{"name":"STM32","slug":"STM32","count":4,"path":"api/tags/STM32.json"},{"name":"DMA","slug":"DMA","count":1,"path":"api/tags/DMA.json"}],"author":{"name":"爱慢跑的乌龟","slug":"blog-author","avatar":"/img/avatar1.jpg","link":"/","description":"求知若饥，虚心若愚！","socials":{"github":"https://github.com/ansonxu1998","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"STM32 GPIO","uid":"c3a5445bafc67228b7830b43d89f077b","slug":"MCU/STM32-GPIO","date":"2022-10-11T07:47:00.000Z","updated":"2023-05-05T08:06:19.527Z","comments":true,"path":"api/articles/MCU/STM32-GPIO.json","keywords":null,"cover":"/img/STM32-GPIO/STM32-logo.jpg","text":"STM32 GPIO GPIO 功能描述 GPIO 的寄存器包括： 2 个 32-bit 配置寄存器 GPIOx_CRL GPIO_CRH 2 个 32-bit 数据寄存器 GPIOx_IDR GPIOx_ODR 1 个 32-bit 置位/复位寄存器 GPIOx_BSRR 1 ...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[{"name":"单片机","slug":"单片机","count":4,"path":"api/categories/单片机.json"}],"tags":[{"name":"STM32","slug":"STM32","count":4,"path":"api/tags/STM32.json"},{"name":"GPIO","slug":"GPIO","count":1,"path":"api/tags/GPIO.json"}],"author":{"name":"爱慢跑的乌龟","slug":"blog-author","avatar":"/img/avatar1.jpg","link":"/","description":"求知若饥，虚心若愚！","socials":{"github":"https://github.com/ansonxu1998","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}